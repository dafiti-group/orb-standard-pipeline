description: |
  This job is responsible to deploy lambda functions using AWS SAM cli
  Needs:
    context: [DEFAULT, (LIVE|QA)]
parameters:
  s3-bucket:
    type: string
    description: the name of the bucket to upload artifact
executor: base
steps:
  - checkout
  - config_docker
  - sam/install
  - run:
      name: Deploy lambda funcion
      environment:
        SAM_DEPLOY_PARAMETER_S3: <<parameters.s3-bucket>>
      command: <<include(scripts/sam-deploy.sh)>>
  - slack/notify:
      event: fail
      custom: <<include(templates/fail.json)>>
