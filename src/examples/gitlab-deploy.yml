description: |
  This workflow example is used only to deploys in 2 environments: [qa, live]
  This example assume that your application is already using docker-compose run --rm ci to unit test everything!
  In order to be notifyed in slack channel, please setup an environment SLACK_MENTIONS,
  in your project settings or in your organization context, with the name of your team
  like @team or with a specific person id using <@USERID>
usage:
  version: 2.1
  parameters:
    rollback:
      type: boolean
      default: false
      description: Arbitraty parameter to trigger manually this workflow selecting rollback actions
    version:
      type: string
      default: ""
      description: The commit hash to revert deployment
  # including dft org
  orbs:
    dft: dafiti-group/orb-standard-pipeline@3.4.0
  # declaring your workflows
  workflows:
    deployment-flow:
      jobs:
        - dft/eks-deploy-gitlab:
            name: deploy-to-ssc
            gitops: ncharts
            rollback: <<pipeline.parameters.rollback>>
            version: <<pipeline.parameters.version>>
            context: [DEFAULT]
